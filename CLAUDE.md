# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## プロジェクト概要

これは自動図生成ツール（Auto Diagram Generator: ADG）プロジェクトです。Claude Code CLIのカスタムコマンドとして、コードを解析して必要な図を自動生成するインテリジェントなツールです。コード内容から適切な図の種類を自動判定し、複数のフォーマット（Mermaid、PlantUML、Draw.io）で出力します。

## プロジェクトアーキテクチャ

### コア機能

1. **自動図判定機能**: コード内容を解析して必要な図を自動で判定
2. **マルチフォーマット対応**: Mermaid、PlantUML、Draw.io形式での出力
3. **バージョン管理**: 東京時間（JST）でのタイムスタンプとセマンティックバージョニング
4. **インクリメンタル更新**: 変更があったファイルのみを対象とした効率的な更新

### 対応図種（30種類以上）

- **構造図**: ER図、クラス図、コンポーネント図、配置図、パッケージ図
- **振る舞い図**: フロー図、アクティビティ図、シーケンス図、ステートチャート図、ユースケース図、コミュニケーション図、タイミング図
- **システム設計図**: システム構成図、ネットワーク図、データフロー図、制御フロー図、コンテキスト図
- **UI設計図**: 画面遷移図、ワイヤーフレーム、モックアップ、サイトマップ
- **分析・管理図**: CRUD図、マトリックス図、ドメインモデル図、プロセス図、決定表、決定木、組織図、ガントチャート、PERT図

## 開発コマンド

現在は仕様・計画フェーズのため、ビルドやテストコマンドはまだ存在しません。実装時の指針：

1. **設定ファイル**: `config/diagram-generator.yaml`に図生成設定を配置
2. **出力ディレクトリ構造**: 図種別ごとに専用ディレクトリで体系的に管理
3. **バージョニング**: すべての図に東京時間のタイムスタンプとバージョン番号を付与

## 実装ガイドライン

### 6フェーズの段階的開発

1. プロジェクト構造のセットアップと基本設定
2. コード解析モジュールの実装
3. 図種別判定ロジックの実装
4. 各フォーマットでの図生成機能
5. バージョン管理とインクリメンタル更新機能
6. テストと最適化

### 重要な技術的考慮事項

- **AI統合**: Claude APIと連携したインテリジェントなコード解析
- **キャッシング**: 変更のない図の再生成を避けるキャッシュ機能
- **エラーハンドリング**: 様々なコードパターンに対する包括的なエラー処理
- **ロギング**: 図生成プロセスのデバッグ用詳細ログ

### ファイル命名規則

生成される図のファイル名パターン：
`{プロジェクト名}_{図種別}_{バージョン}_{タイムスタンプ}.{フォーマット}`

例: `myproject_class-diagram_v1.0.0_20240816-143000.mermaid`

## 重要事項

- 現在は仕様・計画段階のプロジェクトで、実装コードはまだ存在しない
- Claude Code CLIのカスタムコマンドとして設計されている
- すべてのタイムスタンプは東京時間（JST/UTC+9）を使用
- 変更されたファイルのみを処理するインクリメンタル更新に対応